<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags - will be dynamically updated -->
    <title id="page-title">Projekt - TOP INTERIER s.r.o.</title>
    <meta name="description" id="page-description" content="3D vizualizácia interiéru od TOP INTERIER s.r.o.">
    <meta name="keywords" id="page-keywords" content="projekt, vizualizácia, interiér">
    
    <!-- Base CSS -->
    <link rel="stylesheet" href="../css/base.css?v=3.0">
    <!-- Component CSS -->
    <link rel="stylesheet" href="../css/components/header.css?v=3.0">
    <link rel="stylesheet" href="../css/components/footer.css?v=3.0">
    <link rel="stylesheet" href="../css/components/hero.css?v=3.0">
    <!-- Page-specific CSS -->
    <link rel="stylesheet" href="../css/project-detail.css?v=3.0">
    <link rel="stylesheet" href="../css/components/lightbox.css?v=3.0">
    
    <!-- GSAP and Animation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.19/bundled/lenis.min.js"></script>
</head>
<body>
    <!-- Navigation Container -->
    <div id="navigation-container"></div>

    <!-- Project Detail Container -->
    <section class="project-detail-container">
        <!-- Left Sidebar - Project Info -->
        <div class="project-info-sidebar">
            <div class="project-info-content">
                <span class="project-accent-line"></span>
                <h1 id="project-title" class="project-title">Načítava sa...</h1>
                
                <div id="project-description" class="project-description">
                    <p>Načítava sa popis projektu...</p>
                </div>
                
                <div id="project-meta" class="project-meta">
                    <!-- Meta information will be loaded dynamically -->
                </div>
                
                <a href="referencie.html" class="back-to-vizualizacie">
                    ← Späť na referencie
                </a>
            </div>
        </div>
        
        <!-- Right Content - Photo Gallery -->
        <div class="project-gallery-content">
            <div class="project-gallery-grid" id="gallery-grid">
                <!-- Main hero photo will be loaded here -->
            </div>
            <div class="project-gallery-thumbnails" id="gallery-thumbnails">
                <!-- Thumbnail photos will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Footer Container -->
    <div id="footer-container"></div>

    <!-- Load components directly with fallback -->
    <script src="../js/fallback-components.js?v=3.0"></script>
    <script src="../js/gsap-simple.js?v=3.0"></script>
    <script src="../js/components/lightbox.js?v=3.0"></script>
    
    <!-- Dynamic Project Data -->
    <script>
        // Real reference projects data from sources/referencie folder
        const projectsData = {
            'park-house': {
                title: 'Park House',
                description: [
                    'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.',
                    'Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.',
                    'Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt.'
                ],
                meta: [
                    { label: 'Rok realizácie', value: '2024' },
                    { label: 'Lokalita', value: 'Bratislava' }
                ],
                folder: '../sources/referencie/Referencie Park House',
                images: [
                    '20240425_133128.jpg',
                    '20240425_132635.jpg',
                    '20240425_132742.jpg',
                    '20240425_133057.jpg',
                    '20240425_133229.jpg',
                    '20240425_133823.jpg',
                    '20240425_134011.jpg',
                    '20240425_134221.jpg',
                    '20240425_134252.jpg'
                ],
                seoTitle: 'Park House - Luxusný rodinný dom - TOP INTERIER s.r.o.',
                seoDescription: 'Pozrite si našu realizáciu luxusného rodinného domu Park House s moderným dizajnom a prvotriednymi materiálmi.',
                seoKeywords: 'Park House, luxusný dom, moderný interiér, kuchyne na mieru, TOP INTERIER'
            },
            'rd-galanta': {
                title: 'Rodinný dom Galanta',
                description: [
                    'Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae. Mauris viverra veniam sit amet lacus cursus, ac auctor lorem vehicula. Pellentesque habitant morbi tristique senectus et netus et malesuada fames.',
                    'Praesent congue erat at massa. Sed cursus turpis a purus. Aliquam erat volutpat. Morbi imperdiet, mauris ac auctor dictum, nisl ligula egestas nulla, et sollicitudin lorem quis nunc.',
                    'Nulla facilisi. Suspendisse potenti. Aliquam quis turpis eget elit sodales scelerisque. Mauris sit amet eros. Suspendisse accumsan tortor quis turpis.'
                ],
                meta: [
                    { label: 'Rok realizácie', value: '2023' },
                    { label: 'Lokalita', value: 'Galanta' }
                ],
                folder: '../sources/referencie/Referencie RD Galanta',
                images: [
                    '20230317_130237.jpg',
                    '20230317_123937.jpg',
                    '20230317_124021.jpg',
                    '20230317_124108.jpg',
                    '20230317_124210.jpg',
                    '20230317_125134.jpg',
                    '20230317_125334.jpg',
                    '20230317_125546.jpg',
                    '20230317_125641.jpg',
                    '20230317_125814.jpg',
                    '20230317_130516.jpg'
                ],
                seoTitle: 'Rodinný dom Galanta - Kompletná kuchyňa - TOP INTERIER s.r.o.',
                seoDescription: 'Realizácia rodinného domu v Galante s jedinečným dizajnom kuchyne a funkčnými riešeniami.',
                seoKeywords: 'Galanta, rodinný dom, kuchyňa na mieru, interiér, TOP INTERIER'
            },
            'rd-jarovce': {
                title: 'Rodinný dom Jarovce',
                description: [
                    'Nulla facilisi morbi tempus iaculis urna, id volutpat lacus laoreet non curabitur gravida. Arcu cursus euismod quis viverra nibh cras pulvinar mattis nunc sed blandit libero.',
                    'Volutpat sed cras ornare arcu dui vivamus arcu felis bibendum ut. Tristique sollicitudin nibh sit amet commodo nulla facilisi nullam vehicula ipsum.',
                    'At elementum eu facilisis sed odio morbi quis commodo odio. Aenean sed adipiscing diam donec adipiscing tristique risus nec feugiat in fermentum.'
                ],
                meta: [
                    { label: 'Rok realizácie', value: '2019-2020' },
                    { label: 'Lokalita', value: 'Jarovce' }
                ],
                folder: '../sources/referencie/Referencie RD Jarovce',
                images: [
                    '20200612_131727.jpg',
                    '20190618_085739.jpg',
                    '20190618_085844.jpg',
                    '20190618_090735.jpg',
                    '20190618_092053.jpg',
                    '20190618_092245.jpg',
                    '20190618_092413.jpg',
                    '20200611_095347.jpg',
                    '20200612_130053.jpg',
                    '20200612_130454.jpg',
                    '20200612_130646.jpg',
                    '20200612_130836.jpg',
                    '20200612_131341.jpg'
                ],
                seoTitle: 'Rodinný dom Jarovce - Nadčasové riešenie - TOP INTERIER s.r.o.',
                seoDescription: 'Elegantný rodinný dom v Jarovciach s prírodnými materiálmi a nadčasovým dizajnom.',
                seoKeywords: 'Jarovce, rodinný dom, prírodné materiály, nadčasový dizajn, TOP INTERIER'
            },
            'byt-dunajska-streda': {
                title: 'Byt Dunajská Streda',
                description: [
                    'Suspendisse interdum consectetur libero, id faucibus nisl tincidunt eget. Nullam ac erat ante. Quisque imperdiet placerat efficitur. Morbi faucibus congue lacus eu facilisis.',
                    'Integer ultricies risus sed ligula tempus rhoncus. Pellentesque dignissim enim sit amet venenatis urna cursus eget nunc scelerisque viverra mauris in.',
                    'Aliquam malesuada bibendum arcu vitae elementum curabitur vitae nunc sed velit dignissim sodales ut eu sem integer vitae justo eget magna fermentum.'
                ],
                meta: [
                    { label: 'Rok realizácie', value: '2025' },
                    { label: 'Lokalita', value: 'Dunajská Streda' }
                ],
                folder: '../sources/referencie/Referencie byt Dunajská Streda',
                images: [
                    '20250529_141535.jpg',
                    '20250813_185319.jpg',
                    '20250813_192343.jpg',
                    '20250813_192422.jpg',
                    '20250813_192643.jpg',
                    '20250813_192754 copy.jpg',
                    '20250903_093836.jpg',
                    '20250903_093912.jpg',
                    'táta.jpg'
                ],
                seoTitle: 'Byt Dunajská Streda - Moderný bytový interiér - TOP INTERIER s.r.o.',
                seoDescription: 'Štýlový bytový interiér v Dunajskej Strede s funkčnými riešeniami a moderným dizajnom.',
                seoKeywords: 'Dunajská Streda, byt, bytový interiér, moderný dizajn, TOP INTERIER'
            },
            'rd-baka': {
                title: 'Rodinný dom Baka',
                description: [
                    'Praesent sapien massa, convallis a pellentesque nec, egestas non nisi. Cras ultricies ligula sed magna dictum porta. Curabitur non nulla sit amet nisl tempus convallis quis ac lectus.',
                    'Mauris blandit aliquet elit, eget tincidunt nibh pulvinar a. Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. Proin eget tortor risus.',
                    'Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae ultricies eget.'
                ],
                meta: [
                    { label: 'Rok realizácie', value: '2024' },
                    { label: 'Lokalita', value: 'Baka' }
                ],
                folder: '../sources/referencie/Referncie RD Baka',
                images: [
                    '20240301_101417.jpg',
                    '20240301_100141.jpg',
                    '20240301_100432.jpg',
                    '20240301_100539.jpg',
                    '20240301_100619.jpg',
                    '20240301_100818.jpg',
                    '20240301_101051.jpg',
                    '20240301_101544.jpg',
                    '20240301_102018.jpg',
                    '20240301_102403.jpg',
                    '20240301_103041.jpg'
                ],
                seoTitle: 'Rodinný dom Baka - Priestranná kuchyňa s ostrovom - TOP INTERIER s.r.o.',
                seoDescription: 'Moderný rodinný dom v Bake s priestrannou kuchyňou, ostrovom a kvalitným vybavením.',
                seoKeywords: 'Baka, rodinný dom, kuchyňa s ostrovom, moderné vybavenie, TOP INTERIER'
            },
            'rd-velke-dvorníky': {
                title: 'Rodinný dom Veľké Dvorníky',
                description: [
                    'Donec rutrum congue leo eget malesuada. Vivamus magna justo lacinia eget consectetur sed convallis at tellus. Pellentesque in ipsum id orci porta dapibus.',
                    'Vivamus suscipit tortor eget felis porttitor volutpat. Mauris blandit aliquet elit, eget tincidunt nibh pulvinar a. Sed porttitor lectus nibh.',
                    'Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Donec velit neque, auctor sit amet aliquam vel.'
                ],
                meta: [
                    { label: 'Rok realizácie', value: '2024' },
                    { label: 'Lokalita', value: 'Veľké Dvorníky' }
                ],
                folder: '../sources/referencie/Referncie RD Veľké Dvorníky',
                images: [
                    '20241030_141601.jpg',
                    '20241030_141737.jpg',
                    '20241030_142341.jpg',
                    '20241030_143537.jpg',
                    '20241030_143936.jpg',
                    '20241030_144143.jpg',
                    '20241030_144441.jpg'
                ],
                seoTitle: 'Rodinný dom Veľké Dvorníky - Elegantná kuchyňa - TOP INTERIER s.r.o.',
                seoDescription: 'Elegantná kuchyňa s vysokými skrinkami v rodinnom dome vo Veľkých Dvorníkoch.',
                seoKeywords: 'Veľké Dvorníky, rodinný dom, elegantná kuchyňa, vysoké skrinky, TOP INTERIER'
            }
        };

        function getProjectIdFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('projekt') || urlParams.get('id');
        }

        function loadProjectData(projectId) {
            const project = projectsData[projectId];
            
            if (!project) {
                // If project not found, redirect to references page
                window.location.href = 'referencie.html';
                return;
            }

            // Update SEO meta tags
            document.getElementById('page-title').textContent = project.seoTitle;
            document.getElementById('page-description').setAttribute('content', project.seoDescription);
            document.getElementById('page-keywords').setAttribute('content', project.seoKeywords);
            document.title = project.seoTitle;

            // Update project content
            document.getElementById('project-title').textContent = project.title;
            
            // Update description
            const descriptionContainer = document.getElementById('project-description');
            descriptionContainer.innerHTML = '';
            project.description.forEach(paragraph => {
                const p = document.createElement('p');
                p.textContent = paragraph;
                descriptionContainer.appendChild(p);
            });

            // Update meta information
            const metaContainer = document.getElementById('project-meta');
            metaContainer.innerHTML = '';
            project.meta.forEach(item => {
                const metaItem = document.createElement('div');
                metaItem.className = 'project-meta-item';
                metaItem.innerHTML = `
                    <span class="meta-label">${item.label}</span>
                    <span class="meta-value">${item.value}</span>
                `;
                metaContainer.appendChild(metaItem);
            });

            // Load gallery
            loadGallery(project.images, project.folder);
            
            // Initialize lightbox after gallery is loaded
            setTimeout(() => {
                if (typeof initLightbox === 'function') {
                    initLightbox();
                    // Create image paths for lightbox
                    const imagePaths = project.images.map(img => `${project.folder}/${img}`);
                    initGalleryLightbox(imagePaths);
                }
            }, 100);
        }
        
        function loadGallery(images, folder) {
            const galleryGrid = document.getElementById('gallery-grid');
            const galleryThumbnails = document.getElementById('gallery-thumbnails');
            
            images.forEach((image, index) => {
                if (index === 0) {
                    // First image - main hero photo
                    const heroItem = document.createElement('div');
                    heroItem.className = 'project-gallery-item';
                    
                    const imageWrapper = document.createElement('div');
                    imageWrapper.className = 'project-gallery-item-image-wrapper';
                    
                    const heroImg = document.createElement('img');
                    heroImg.src = `${folder}/${image}`;
                    heroImg.alt = `${folder} - hlavný obrázok`;
                    heroImg.loading = 'eager';
                    
                    imageWrapper.appendChild(heroImg);
                    heroItem.appendChild(imageWrapper);
                    galleryGrid.appendChild(heroItem);
                } else {
                    // Other images - thumbnails in 3-per-row grid
                    const thumbItem = document.createElement('div');
                    thumbItem.className = 'project-gallery-item';
                    
                    const imageWrapper = document.createElement('div');
                    imageWrapper.className = 'project-gallery-item-image-wrapper';
                    
                    const thumbImg = document.createElement('img');
                    thumbImg.src = `${folder}/${image}`;
                    thumbImg.alt = `${folder} - obrázok ${index + 1}`;
                    thumbImg.loading = 'lazy';
                    
                    imageWrapper.appendChild(thumbImg);
                    thumbItem.appendChild(imageWrapper);
                    galleryThumbnails.appendChild(thumbItem);
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Lenis is already initialized in gsap-simple.js - no need for duplicate
            
            // Load project based on URL parameter
            const projectId = getProjectIdFromUrl();
            if (projectId) {
                loadProjectData(projectId);
            } else {
                // If no project ID, redirect to references page
                window.location.href = 'referencie.html';
            }
        });
    </script>
</body>
</html>