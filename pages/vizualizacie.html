<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Vizualizácie - TOP INTERIER s.r.o. | 3D návrhy interiérov</title>
    <meta name="description" content="3D vizualizácie a návrhy interiérov od TOP INTERIER s.r.o. - moderné riešenia pre vaš domov v Bratislave a Dunajskej Strede.">
    <meta name="keywords" content="vizualizácie, 3D návrhy, TOP INTERIER, interiéry, kuchyne, Bratislava, Dunajská Streda">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://topinterier.sk/vizualizacie">

    <!-- Base CSS -->
    <link rel="stylesheet" href="/css/base.css?v=3.0">
    <!-- Component CSS -->
    <link rel="stylesheet" href="/css/components/header.css?v=3.0">
    <link rel="stylesheet" href="/css/components/footer.css?v=3.0">
    <link rel="stylesheet" href="/css/components/hero.css?v=3.0">
    <!-- Page-specific CSS -->
    <link rel="stylesheet" href="/css/referencie.css?v=3.0">
    <link rel="stylesheet" href="/css/components/filter.css?v=3.0">
    <link rel="stylesheet" href="/css/components/lightbox.css?v=3.0">
    
    <!-- GSAP and Animation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.19/bundled/lenis.min.js"></script>
</head>
<body>
    <!-- Navigation Container -->
    <div id="navigation-container"></div>

    <!-- Hero Section -->
    <section class="contact-hero">
        <div class="contact-hero-content">
            <div class="container">
                <h1 class="contact-hero-title">Vizualizácie</h1>
            </div>
        </div>
    </section>

    <!-- Gallery Section with Filter -->
    <section class="gallery-section">
        <div class="page-with-filter">
            <!-- Filter Sidebar -->
            <div class="filter-sidebar">
                <div id="filter-container">
                    <!-- Filter will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="main-content">
                <div class="vizualizacie-cards-grid" id="vizualizacie-gallery">
                    <!-- Gallery items will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Container -->
    <div id="footer-container"></div>

    <!-- Fallback Components (always loads) -->
    <script src="/js/fallback-components.js?v=3.0"></script>
    <script src="/js/gsap-simple.js?v=3.0"></script>
    <script src="/js/components/filter.js?v=3.0"></script>
    <script src="/js/components/lightbox.js?v=3.0"></script>

    <!-- Vizualizácie Gallery Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const galleryContainer = document.getElementById('vizualizacie-gallery');
            
            // Category cards data with photos from reference projects
            const categoryCards = [
                {
                    id: 'kuchyne',
                    title: 'Kuchyne',
                    description: 'Moderné a funkčné kuchynské riešenia na mieru',
                    coverImage: '/sources/referencie/Referencie Park House/20240425_133128.jpg',
                    photos: []
                },
                {
                    id: 'obyvacie-izby',
                    title: 'Obývacie izby',
                    description: 'Útulné a elegantné priestory pre relaxáciu',
                    coverImage: '/sources/referencie/Referencie RD Galanta/20230317_125134.jpg',
                    photos: []
                },
                {
                    id: 'spalne',
                    title: 'Spálne',
                    description: 'Pokojné a harmonické priestory pre odpočinok',
                    coverImage: '/sources/referencie/Referencie RD Jarovce/20200611_095347.jpg',
                    photos: []
                },
                {
                    id: 'detske-izby',
                    title: 'Detské izby',
                    description: 'Farebné a bezpečné priestory pre deti',
                    coverImage: '/sources/vizualizacie/detske-izby/01.jpg',
                    photos: [
                        '/sources/vizualizacie/detske-izby/01.jpg',
                        '/sources/vizualizacie/detske-izby/02.jpg',
                        '/sources/vizualizacie/detske-izby/03.jpg',
                        '/sources/vizualizacie/detske-izby/04.jpg',
                        '/sources/vizualizacie/detske-izby/06.jpg',
                        '/sources/vizualizacie/detske-izby/07.jpg',
                        '/sources/vizualizacie/detske-izby/08.jpg',
                        '/sources/vizualizacie/detske-izby/09.jpg',
                        '/sources/vizualizacie/detske-izby/10.jpg',
                        '/sources/vizualizacie/detske-izby/11.jpg',
                        '/sources/vizualizacie/detske-izby/12.jpg',
                        '/sources/vizualizacie/detske-izby/13.jpg',
                        '/sources/vizualizacie/detske-izby/14.jpg',
                        '/sources/vizualizacie/detske-izby/15.jpg',
                        '/sources/vizualizacie/detske-izby/16.jpg',
                        '/sources/vizualizacie/detske-izby/17.jpg',
                        '/sources/vizualizacie/detske-izby/18.jpg',
                        '/sources/vizualizacie/detske-izby/19.jpg',
                        '/sources/vizualizacie/detske-izby/20.jpg',
                        '/sources/vizualizacie/detske-izby/21.jpg',
                        '/sources/vizualizacie/detske-izby/22.jpg',
                        '/sources/vizualizacie/detske-izby/23.jpg',
                        '/sources/vizualizacie/detske-izby/26.jpg',
                        '/sources/vizualizacie/detske-izby/27.jpg',
                        '/sources/vizualizacie/detske-izby/28.jpg',
                        '/sources/vizualizacie/detske-izby/29.jpg',
                        '/sources/vizualizacie/detske-izby/32.jpg',
                        '/sources/vizualizacie/detske-izby/33.jpg'
                    ]
                },
                {
                    id: 'predsiene',
                    title: 'Predsiene',
                    description: 'Funkčné vstupné priestory a chodby',
                    coverImage: '/sources/referencie/Referencie RD Jarovce/20200612_130646.jpg',
                    photos: []
                },
                {
                    id: 'ostatne',
                    title: 'Ostatné',
                    description: 'Ďalšie priestory a špeciálne riešenia',
                    coverImage: '/sources/referencie/Referncie RD Veľké Dvorníky/20241030_143537.jpg',
                    photos: []
                }
            ];
            
            let currentView = 'categories'; // 'categories' or 'photos'
            let currentCategory = null;
            
            // Create category cards
            function createCategoryCards() {
                galleryContainer.innerHTML = '';
                currentView = 'categories';
                
                categoryCards.forEach(function(category) {
                    const categoryCard = document.createElement('div');
                    categoryCard.className = 'vizualizacie-card';
                    categoryCard.setAttribute('data-category', category.id);
                    
                    categoryCard.innerHTML = `
                        <div class="vizualizacie-card-container category-card" data-category-id="${category.id}">
                            <img src="${category.coverImage}" alt="${category.title}" loading="lazy">
                            <div class="vizualizacie-card-overlay">
                                <h3 class="vizualizacie-card-title">${category.title}</h3>
                                <p class="vizualizacie-card-description">${category.description}</p>
                            </div>
                        </div>
                    `;
                    
                    // Add click event to open category
                    categoryCard.addEventListener('click', () => {
                        openCategory(category);
                    });
                    
                    galleryContainer.appendChild(categoryCard);
                });
                
                // Trigger animation after cards are created
                triggerCardAnimations();
            }
            
            // Open category to show photos
            function openCategory(category) {
                currentCategory = category;
                currentView = 'photos';
                galleryContainer.innerHTML = '';
                
                // Update page title
                const pageTitle = document.querySelector('.contact-hero-title');
                if (pageTitle) {
                    pageTitle.innerHTML = `<span style="cursor: pointer;" onclick="goBackToCategories()">← Vizualizácie</span> / ${category.title}`;
                }
                
                // Create photo grid
                category.photos.forEach(function(photo, index) {
                    const photoCard = document.createElement('div');
                    photoCard.className = 'vizualizacie-card';
                    photoCard.setAttribute('data-category', category.id);
                    
                    photoCard.innerHTML = `
                        <div class="vizualizacie-card-container" data-lightbox="category-photos" data-src="${photo}">
                            <img src="${photo}" alt="${category.title} ${index + 1}" loading="lazy">
                        </div>
                    `;
                    
                    galleryContainer.appendChild(photoCard);
                });
                
                // Trigger animation for photo cards
                triggerCardAnimations();
                
                // Update sidebar filter to show active category
                updateSidebarFilter(category.id);
                
                // Re-initialize lightbox for photos
                if (typeof initLightbox === 'function') {
                    initLightbox();
                    initLightboxForPhotos(category.photos);
                }
            }
            
            // Go back to categories view
            function goBackToCategories() {
                currentView = 'categories';
                currentCategory = null;
                
                // Reset page title
                const pageTitle = document.querySelector('.contact-hero-title');
                if (pageTitle) {
                    pageTitle.textContent = 'Vizualizácie';
                }
                
                createCategoryCards();
                
                // Reset sidebar filter
                updateSidebarFilter('all');
            }
            
            // Update sidebar filter active state
            function updateSidebarFilter(activeCategory) {
                // Wait for filter to be initialized
                setTimeout(() => {
                    const filterButtons = document.querySelectorAll('.filter-category');
                    const mobileOptions = document.querySelectorAll('.mobile-filter-option');
                    
                    // Remove active from all
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    mobileOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // Add active to current category
                    const activeBtn = document.querySelector(`.filter-category[data-filter="${activeCategory}"]`);
                    const activeMobileOpt = document.querySelector(`.mobile-filter-option[data-filter="${activeCategory}"]`);
                    
                    if (activeBtn) {
                        activeBtn.classList.add('active');
                    }
                    
                    if (activeMobileOpt) {
                        activeMobileOpt.classList.add('active');
                        // Update mobile dropdown text
                        const selectedText = document.querySelector('.mobile-selected-text');
                        if (selectedText) {
                            selectedText.textContent = activeMobileOpt.textContent;
                        }
                    }
                }, 100);
            }
            
            // Initialize lightbox for category photos
            function initLightboxForPhotos(photos) {
                const lightboxElements = document.querySelectorAll('[data-lightbox="category-photos"]');
                if (lightboxElements.length > 0) {
                    lightboxElements.forEach((element, index) => {
                        element.style.cursor = 'pointer';
                        element.addEventListener('click', () => {
                            if (typeof openLightbox === 'function') {
                                openLightbox(photos, index);
                            }
                        });
                    });
                }
            }
            
            // Trigger card animations (move up effect)
            function triggerCardAnimations() {
                const cards = document.querySelectorAll('.vizualizacie-card');
                
                // Initially hide cards (move them down and make transparent)
                cards.forEach(card => {
                    card.style.transform = 'translateY(50px)';
                    card.style.opacity = '0';
                    card.style.transition = 'transform 0.6s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.6s ease';
                });
                
                // Animate cards up with staggered delay
                cards.forEach((card, index) => {
                    setTimeout(() => {
                        card.style.transform = 'translateY(0)';
                        card.style.opacity = '1';
                    }, index * 150); // 150ms delay between each card
                });
            }
            
            // Make functions globally available
            window.goBackToCategories = goBackToCategories;
            window.openCategoryFromFilter = function(categoryId) {
                if (currentView === 'categories') {
                    // If on categories view, find and open the category
                    const category = categoryCards.find(cat => cat.id === categoryId);
                    if (category) {
                        openCategory(category);
                    }
                } else {
                    // If in photos view, check if it's the same category
                    if (currentCategory && currentCategory.id === categoryId) {
                        // Same category, just update filter state
                        updateSidebarFilter(categoryId);
                    } else {
                        // Different category, switch to it
                        const category = categoryCards.find(cat => cat.id === categoryId);
                        if (category) {
                            openCategory(category);
                        }
                    }
                }
            };
            
            // Override filter button clicks to manage active state properly
            window.customApplyFilter = function(filterId) {
                // Update active state immediately
                setTimeout(() => {
                    updateSidebarFilter(filterId);
                }, 50);
                
                // Then handle the filter logic
                if (filterId !== 'all') {
                    window.openCategoryFromFilter(filterId);
                } else {
                    window.goBackToCategories();
                }
            };
            
            // Initialize category cards
            createCategoryCards();
            
            // Initialize filter with custom flag
            if (typeof initFilter === 'function') {
                window.customFilterInit = true; // Prevent default active state
                initFilter();
                // Set "Všetky kategórie" as active initially
                setTimeout(() => {
                    updateSidebarFilter('all');
                }, 200);
            }
            
            // Initialize lightbox
            if (typeof initLightbox === 'function') {
                initLightbox();
                
                // Initialize data-lightbox functionality
                const lightboxElements = document.querySelectorAll('[data-lightbox]');
                if (lightboxElements.length > 0) {
                    // Group images by data-lightbox attribute
                    const groups = {};
                    lightboxElements.forEach(element => {
                        const groupName = element.getAttribute('data-lightbox');
                        if (!groups[groupName]) groups[groupName] = [];
                        groups[groupName].push({
                            element: element,
                            src: element.getAttribute('data-src') || element.querySelector('img').src
                        });
                    });
                    
                    // Add click handlers for each group
                    Object.keys(groups).forEach(groupName => {
                        const group = groups[groupName];
                        const imagePaths = group.map(item => item.src);
                        
                        group.forEach((item, index) => {
                            item.element.style.cursor = 'pointer';
                            item.element.addEventListener('click', () => {
                                if (typeof openLightbox === 'function') {
                                    openLightbox(imagePaths, index);
                                }
                            });
                        });
                    });
                }
            }
        });
    </script>

    <!-- Main JavaScript (ES6 modules) -->
    <script type="module" src="/js/main.js?v=3.0"></script>
</body>
</html>